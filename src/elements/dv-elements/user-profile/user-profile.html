<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="user-identicon.html">
<dom-module id="user-profile">
    <style>
        :host {
            display: flex;
            justify-content: center;
            min-width: 500px;
        }
        paper-material {
            margin-top: 20px;
            width: 500px;
            background:#fff;
        }
        paper-material + paper-material {
            margin-top: 5px;
        }

        paper-material .paper-material-inner {
            width: 100%;
            box-sizing: border-box;
        }

        .border-top {
            border-top: 5px solid #333;
        }

        .display-flex {
            display: flex;
        }
        .column {
            flex-direction: column;
        }
        .username-header {
            font-family: 'Roboto', 'Noto', sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 48px;
            font-weight: 400;
            letter-spacing: -.012em;
            line-height: 48px;
        }
        .image-holder {
            width: 100px;
            justify-content: center;
        }
        .btn{
            background-color: #4285f4;
            color: white;
            --paper-button-raised-keyboard-focus: {
                background-color: #4285f4 !important;
                color: white !important;
            };
            border: none !important;
            text-transform: none;
            border-radius: 0 !important;
            margin: 0 !important;
            float: right;
        }
        .flex {
            flex: 1 1 auto;
        }
        .label {
            min-width: 150px;
            max-width: 150px;
            font-weight: bold;
        }
        .value {
            color: #757575;
            max-width: calc(452px - 150px + 68px);
            max-height: calc(70px - 24px);
            overflow-y: scroll;
            word-wrap: break-word;
            margin-right: 10px;
        }
        .org {
            margin-top: 5px;
            margin-bottom: 5px;
            color: #ff625d;
            font-size: 0.8em;
        }
        .row {
            height: 70px;
            margin: 0 24px;
            padding: 24px 0;
            line-height: 1.4em;
            font-size: 12px;
            box-sizing: border-box;
        }
        .row + .row {
            border-top: 1px solid #eee;
        }
        .vertically-align {
            align-items: center;
        }
    </style>
    <template>
        <div class="display-flex column">
            <paper-material elevation="2">
                <div class="paper-material-inner display-flex border-top" style="background: #f5f5f5">
                    <div class="display-flex vertically-align image-holder">
                        <user-identicon size="60" value="[[username]]"></user-identicon>
                    </div>

                    <div class="display-flex column flex"
                         style="border-left: 1px solid #ccc; background: #fff; padding-left: 10px">
                        <div class="username-header flex" style="margin-right: 10px;">[[username]]</div>
                        <div class="org">
                            [[organisationName]]
                        </div>
                    </div>
                </div>
            </paper-material>

            <paper-material>
                <div class="paper-material-inner display-flex column">
                    <div class="display-flex row vertically-align">
                        <div class="label">Home directory path</div>
                        <div class="value flex">
                            [[homeDir]]
                        </div>
                        <paper-button class="btn" on-tap="_view" data-path$="[[homeDir]]">view</paper-button>
                    </div>
                    <div class="display-flex row vertically-align">
                        <div class="label">Root directory path</div>
                        <div class="value flex">
                            [[rootDir]]
                        </div>
                        <paper-button class="btn" on-tap="_view" data-path$="[[rootDir]]">view</paper-button>
                    </div>
                    <div class="display-flex row vertically-align">
                        <div class="label">User identifier (UID)</div>
                        <div class="value">[[uid]]</div>
                    </div>
                    <div class="display-flex row vertically-align">
                        <div class="label">Group identifier (GID)</div>
                        <div class="value">[[gids]]</div>
                    </div>
                </div>
            </paper-material>
        </div>
    </template>
    <script>
        UserProfile = Polymer({
            is: 'user-profile',
            properties: {
                username: {
                    type: String,
                    notify: true,
                    value: function () {
                        return sessionStorage.getItem("name");
                    }
                },
                uid: {
                    type: String,
                    notify: true,
                    value: function () {
                        return sessionStorage.uid;
                    }
                },
                gids: {
                    type: String,
                    notify: true,
                    value: function () {
                        return sessionStorage.gids;
                    }
                },
                organisationName: {
                    type: String,
                    value: function () {
                        return window.CONFIG["dcache-view.org-name"];
                    },
                    notify: true
                },
                rootDir: {
                    type: String,
                    notify: true,
                    value: function () {
                        return sessionStorage.rootDirectory;
                    }
                },
                homeDir: {
                    type: String,
                    notify: true,
                    value: function () {
                        return sessionStorage.homeDirectory;
                    }
                },
            },
            _view: function (e)
            {
                const path = e.target.getAttribute('data-path');
                page.redirect("/");
                app.ls(path);
            }
        });
    </script>
</dom-module>